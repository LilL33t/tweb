<div class="container mt-5">

    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="text-center mb-4">
                <h1 class="display-4 fw-bold">Explore Anime Data</h1>
                <p class="lead text-muted">Search across 28k animes and 124M ratings</p>
            </div>

            <form action="/search" method="GET" class="card p-4 shadow-sm border-0 bg-light">

                <div class="input-group input-group-lg mb-3">
                    <input type="text" name="q" class="form-control" placeholder="Enter anime title..." value="{{searchParams.q}}">
                    <button class="btn btn-primary px-4" type="submit">Search</button>
                </div>
                <a href="/" class="btn btn-secondary ms-2">
                    <i class="bi bi-arrow-counterclockwise"></i> Reset
                </a>

                <div class="row g-2">
                    <div class="col-md-3">
                        <label class="form-label small fw-bold text-muted">Genre</label>
                        <select name="genre" class="form-select form-select-sm">
                            <option value="">All Genres</option>
                            <option value="Action">Action</option>
                            <option value="Adventure">Adventure</option>
                            <option value="Avant Garde">Avant Garde</option>
                            <option value="Award Winning">Award Winning</option>
                            <option value="Boys Love">Boys Love</option>
                            <option value="Comedy">Comedy</option>
                            <option value="Drama">Drama</option>
                            <option value="Ecchi">Ecchi</option>
                            <option value="Erotica">Erotica</option>
                            <option value="Fantasy">Fantasy</option>
                            <option value="Girls Love">Girls Love</option>
                            <option value="Gourmet">Gourmet</option>
                            <option value="Hentai">Hentai</option>
                            <option value="Horror">Horror</option>
                            <option value="Mystery">Mystery</option>
                            <option value="Romance">Romance</option>
                            <option value="Sci-Fi">Sci-Fi</option>
                            <option value="Slice of Life">Slice of Life</option>
                            <option value="Sports">Sports</option>
                            <option value="Supernatural">Supernatural</option>
                            <option value="Suspense">Suspense</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label small fw-bold text-muted">Rating</label>
                        <select name="rating" class="form-select form-select-sm">
                            <option value="">Any Rating</option>
                            <option value="PG - Children">PG - Children</option>
                            <option value="PG-13 - Teens 13 or older">PG-13 - Teens 13 or older</option>
                            <option value="Rx - Hentai">Rx - Hentai</option>
                            <option value="G - All Ages">G - All Ages</option>
                            <option value="R - 17+ (violence & profanity)">R - 17+ (violence & profanity)</option>
                            <option value="R+ - Mild Nudity">R+ - Mild Nudity</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label small fw-bold text-muted">Min Score</label>
                        <select name="min_score" class="form-select form-select-sm">
                            <option value="">Any</option>
                            <option value="9">9+</option>
                            <option value="8">8+</option>
                            <option value="7">7+</option>
                            <option value="6">6+</option>
                            <option value="5">5+</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
    </div>

    {{#if topAnime}}
        <div id="default-suggestions" class="mb-5">

            <h3 class="mb-4">
                {{#if searchParams}}Search Results{{else}}Top Ranked Anime{{/if}}
            </h3>

            <div class="row row-cols-1 row-cols-md-3 g-4">
                {{#each topAnime}}
                    <div class="col">
                        <div class="card h-100 shadow-sm border rounded">

                            <div style="height: 300px; overflow: hidden;">
                                <img src="{{this.imageUrl}}" class="card-img-top h-100 w-100" style="object-fit: cover;" alt="{{this.title}}">
                            </div>

                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title text-truncate" title="{{this.title}}">
                                    {{this.title}}
                                </h5>

                                <p class="card-text text-muted small mb-3">
                                    {{#if this.genres}}
                                        {{this.genres}}
                                    {{else}}
                                        {{this.type}}
                                    {{/if}}
                                </p>

                                <a href="/anime/{{this.malId}}" class="btn btn-primary w-100 mt-auto">
                                    See more
                                </a>
                            </div>

                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
    {{/if}}

</div>

<style>
    .hover-effect { transition: transform 0.2s; }
    .hover-effect:hover { transform: translateY(-5px); }
</style>